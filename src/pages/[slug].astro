---
import Layout from "../layouts/Layout.astro";
import Gallery from "../components/sections/gallery/Gallery.astro";
import LandInfo from "../components/sections/land-info/LandInfo.astro";

import type { GetStaticPaths } from "astro";

import dataModel from "../model/ContentfulModel";
import type { Land } from "../model/Land";
import Container from "../layouts/Container.astro";

// Generate separate page for each of the land items
export const getStaticPaths = (async () => {
  const lands = await dataModel.getAllLands();

  return lands.map((land) => ({
    params: { slug: land.slug }, // slug is used as path in [slug].astro
    props: { land: land }, // data to use for page generation
  }));
}) satisfies GetStaticPaths;

let land: Land;
land = Astro.props.land;
---

<Layout title={land.title || "Land"} currentPage={land.slug}>
  <Container
    className="pt-16 lg:pt-20 pb-6 lg:pb-10 bg-gradient-to-t lg:from-[--color-secondary-lighter] from-[#40527338]"
  >
    <Gallery
      tag={land.tag}
      images={land.images || []}
      videos={land.videos || []}
    />
    <LandInfo land={land} />
  </Container>
</Layout>
